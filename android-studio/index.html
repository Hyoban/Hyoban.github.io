<!doctype html><html><head>
<meta charset=utf-8>
<title> 如何开始写一个 android 项目
</title>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=theme-color content="#157878">
<link rel=stylesheet href=/css/normalize.css>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css>
<link rel=stylesheet href=/css/cayman.css>
</head>
<body><section class=page-header>
<h1 class=project-name> 如何开始写一个 android 项目
</h1>
<h2 class=project-tagline> 关于 Android studio 的配置和踩坑记录
</h2>
</section>
<section class=main-content>
<main>
<article>
<header>
<h2>目录</h2>
<nav id=TableOfContents>
<ul>
<li><a href=#android-studio-设置>android studio 设置</a></li>
<li><a href=#idea-系快捷键>idea 系快捷键</a></li>
<li><a href=#spotless-和-ktlint>spotless 和 ktlint</a>
<ul>
<li><a href=#通过-ktlint-来设置-kotlin-代码风格>通过 ktlint 来设置 kotlin 代码风格</a></li>
<li><a href=#设置-spotless>设置 spotless</a></li>
<li><a href=#配置-gradle>配置 gradle</a></li>
<li><a href=#参考>参考</a></li>
</ul>
</li>
<li><a href=#启用版本控制>启用版本控制</a></li>
<li><a href=#使用-r8-来压缩应用体积>使用 r8 来压缩应用体积</a>
<ul>
<li><a href=#参考-1>参考</a></li>
</ul>
</li>
</ul>
</nav>
</header>
<h2 id=android-studio-设置>android studio 设置</h2>
<ol>
<li>更新最新，请保持版本和插件为最新稳定版</li>
<li>内存设置，设置到最大</li>
<li>sdk 下载</li>
<li>代理配置</li>
</ol>
<h2 id=idea-系快捷键>idea 系快捷键</h2>
<ul>
<li>
<p>cmd + shift + u 转换大小写</p>
</li>
<li>
<p>option + shift + click 多光标</p>
</li>
<li>
<p>cmd + option + t 创建代码块供折叠</p>
</li>
<li>
<p>cmd + . 折叠</p>
</li>
<li>
<p>cmd + shift + + or - 快速折叠和展开全部代码块</p>
</li>
</ul>
<h2 id=spotless-和-ktlint>spotless 和 ktlint</h2>
<h3 id=通过-ktlint-来设置-kotlin-代码风格>通过 ktlint 来设置 kotlin 代码风格</h3>
<p>需要提前安装好 ktlint，在项目文件夹下运行</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>ktlint --android applyToIDEAProject
</code></pre></div><p>这只会影响当前 idea 项目，也是官方推荐的方法，你可以点击 <a href=https://github.com/pinterest/ktlint#-with-intellij-idea>链接</a> 查看更多</p>
<h3 id=设置-spotless>设置 spotless</h3>
<p>请手动查询当前的 spotless 和 ktlint 的最新版本，链接已放在后面</p>
<script src=https://gist.github.com/hyoban/e18fc910f045e50e0fb7a37c39030f25.js></script>
<p>不要忘记移除 as 默认生成的 task</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gradle data-lang=gradle>task <span style=color:#00f>clean</span><span style=color:#666>(</span><span style=color:#a0a000>type:</span> Delete<span style=color:#666>)</span> <span style=color:#666>{</span>
    delete rootProject<span style=color:#666>.</span><span style=color:#7d9029>buildDir</span>
<span style=color:#666>}</span> 
</code></pre></div><h3 id=配置-gradle>配置 gradle</h3>
<p>终端输入 <code>./gradlew app:spotlessApply</code>，按下 <code>cmd + enter</code> 来创建</p>
<h3 id=参考>参考</h3>
<ul>
<li><a href=https://github.com/android/android-dev-challenge-compose>谷歌项目示例</a></li>
<li><a href=https://github.com/diffplug/spotless>spotless</a></li>
<li><a href=https://github.com/pinterest/ktlint>ktlint</a></li>
</ul>
<h2 id=启用版本控制>启用版本控制</h2>
<p>我们需要配置好 git ignore 文件，可以参考前面的谷歌项目示例，也可以参考 github 维护的 <a href=https://github.com/github/gitignore/blob/master/Android.gitignore>示例</a></p>
<p>当然你可以排除你想要排除的，但是请确保别人 clone 下你的项目，可以马上跑起来</p>
<h2 id=使用-r8-来压缩应用体积>使用 r8 来压缩应用体积</h2>
<p>我们只需要设置 minifyEnabled true 即可</p>
<p>不过需要注意的是，一些第三方库使用到了反射，我们需要保留这些代码不被优化掉。要保留名称字段，在 proguard-rules.pro 文件中添加一个保留规则 -keep:</p>
<ol>
<li>litepal <a href=https://github.com/guolindev/LitePal#proguard>ProGuard</a></li>
<li>serialization <a href=https://github.com/Kotlin/kotlinx.serialization#android>ProGuard</a></li>
</ol>
<h3 id=参考-1>参考</h3>
<p><a href=https://developer.android.google.cn/studio/build/shrink-code>Shrink, obfuscate, and optimize your app</a>
<a href=https://mp.weixin.qq.com/s/zDx-SdsqargT4JB6oMIrTw>使用 R8 压缩您的应用</a></p>
<h2>评论</h2>
<div id=cusdis_thread data-host=https://cusdis.com data-app-id=4eab0f57-ebdc-4f97-9701-66535c7742fc data-page-id=ca04b6de5ac1d2e3f1fdf2ed621742a7 data-page-url=https://hyoban.github.io/android-studio/ data-page-title="如何开始写一个 android 项目"></div>
<script async defer src=https://cusdis.com/js/cusdis.es.js></script>
</article>
</main>
<footer class=site-footer>
<span class=site-footer-credits>
Made with <a href=https://gohugo.io/>Hugo</a>. Themed by <a href=https://github.com/zwbetz-gh/cayman-hugo-theme>Cayman</a>. Deployed to <a href=https://pages.github.com/>Github Pages</a>.
</span>
</footer>
</section>
</body>
</html>